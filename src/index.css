@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-success: var(--success);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* Papercraft surface colors */
  --color-paper-white: var(--paper-white);
  --color-paper-cream: var(--paper-cream);
  --color-paper-kraft: var(--paper-kraft);
}

/* Papercraft Amber/Orange Theme */
:root {
  --radius: 0.625rem;
  --background: oklch(0.987 0.022 95.277);        /* amber-50 */
  --foreground: oklch(0.414 0.112 45.904);        /* amber-900 */
  --card: oklch(0.996 0.007 106.424);             /* warm white */
  --card-foreground: oklch(0.414 0.112 45.904);   /* amber-900 */
  --popover: oklch(0.996 0.007 106.424);
  --popover-foreground: oklch(0.414 0.112 45.904);
  --primary: oklch(0.666 0.179 58.318);           /* amber-600 */
  --primary-foreground: oklch(1 0 0);             /* white */
  --secondary: oklch(0.962 0.059 95.617);         /* amber-100 */
  --secondary-foreground: oklch(0.476 0.114 52.304); /* amber-800 */
  --muted: oklch(0.943 0.051 95.386);             /* light amber */
  --muted-foreground: oklch(0.555 0.163 48.998);  /* amber-700 */
  --accent: oklch(0.705 0.191 47.604);            /* orange-500 */
  --accent-foreground: oklch(1 0 0);              /* white */
  --destructive: oklch(0.577 0.245 27.325);
  --success: oklch(0.55 0.15 145);                /* green for confirmations */
  --border: oklch(0.905 0.093 95.136);            /* amber-200 */
  --input: oklch(0.905 0.093 95.136);
  --ring: oklch(0.705 0.191 47.604);              /* orange-500 */
  --chart-1: oklch(0.666 0.179 58.318);           /* amber-600 */
  --chart-2: oklch(0.646 0.222 41.116);           /* orange-600 */
  --chart-3: oklch(0.769 0.188 70.08);            /* yellow-orange */
  --chart-4: oklch(0.828 0.189 84.429);           /* warm yellow */
  --chart-5: oklch(0.555 0.163 48.998);           /* amber-700 */
  --sidebar: oklch(0.987 0.022 95.277);           /* amber-50 */
  --sidebar-foreground: oklch(0.414 0.112 45.904);
  --sidebar-primary: oklch(0.666 0.179 58.318);
  --sidebar-primary-foreground: oklch(1 0 0);
  --sidebar-accent: oklch(0.962 0.059 95.617);
  --sidebar-accent-foreground: oklch(0.476 0.114 52.304);
  --sidebar-border: oklch(0.905 0.093 95.136);
  --sidebar-ring: oklch(0.705 0.191 47.604);

  /* ========================================
     PAPERCRAFT DESIGN SYSTEM TOKENS
     ======================================== */

  /* Paper Surface Colors */
  --paper-white: oklch(0.98 0.01 90);
  --paper-cream: oklch(0.96 0.02 85);
  --paper-kraft: oklch(0.75 0.08 70);

  /* Shadow Color (warm gray, never pure black) */
  --shadow-color: 40 10% 20%;

  /* Elevation Shadows (Two-Shadow Model) */
  --paper-elevation-0:
    0 1px 1px hsl(var(--shadow-color) / 0.04);

  --paper-elevation-1:
    0 1px 1px hsl(var(--shadow-color) / 0.07),
    0 2px 2px hsl(var(--shadow-color) / 0.06),
    0 4px 4px hsl(var(--shadow-color) / 0.05);

  --paper-elevation-2:
    0 1px 1px hsl(var(--shadow-color) / 0.06),
    0 2px 2px hsl(var(--shadow-color) / 0.06),
    0 4px 4px hsl(var(--shadow-color) / 0.06),
    0 8px 8px hsl(var(--shadow-color) / 0.05),
    0 16px 16px hsl(var(--shadow-color) / 0.04);

  --paper-elevation-3:
    0 1px 1px hsl(var(--shadow-color) / 0.05),
    0 2px 2px hsl(var(--shadow-color) / 0.05),
    0 4px 4px hsl(var(--shadow-color) / 0.05),
    0 8px 8px hsl(var(--shadow-color) / 0.05),
    0 16px 16px hsl(var(--shadow-color) / 0.04),
    0 32px 32px hsl(var(--shadow-color) / 0.03);

  /* Special Shadows */
  --paper-shadow-sticky:
    0 3px 2px hsl(var(--shadow-color) / 0.06),
    0 6px 4px hsl(var(--shadow-color) / 0.05),
    0 12px 8px hsl(var(--shadow-color) / 0.04);

  --paper-shadow-inset:
    inset 0 1px 2px hsl(var(--shadow-color) / 0.1),
    inset 0 2px 4px hsl(var(--shadow-color) / 0.05);

  --paper-shadow-kraft:
    0 1px 1px hsl(var(--shadow-color) / 0.1),
    0 2px 2px hsl(var(--shadow-color) / 0.08),
    0 4px 4px hsl(var(--shadow-color) / 0.06);

  /* State Transforms */
  --paper-state-default-transform: translateY(0);
  --paper-state-hover-transform: translateY(-4px) rotateX(2deg);
  --paper-state-active-transform: translateY(1px) scale(0.98);
  --paper-state-dragging-transform: translateY(-8px) rotate(-2deg);

  /* Transitions */
  --paper-transition-lift: 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
  --paper-transition-press: 0.1s cubic-bezier(0.4, 0, 0.2, 1);
  --paper-transition-settle: 0.3s cubic-bezier(0.22, 1, 0.36, 1);
  --paper-transition-fold: 0.5s cubic-bezier(0.4, 0, 0.2, 1);

  /* Durations */
  --paper-duration-instant: 100ms;
  --paper-duration-fast: 150ms;
  --paper-duration-normal: 250ms;
  --paper-duration-slow: 400ms;
  --paper-duration-deliberate: 600ms;

  /* Focus */
  --paper-focus-ring-width: 3px;
  --paper-focus-ring-color: oklch(0.6 0.15 250);
  --paper-focus-ring-offset: 2px;

  /* Disabled States */
  --paper-state-disabled-opacity: 0.5;
  --paper-state-disabled-filter: grayscale(30%);

  /* Texture Opacity Scale */
  --texture-opacity-subtle: 0.04;
  --texture-opacity-light: 0.08;
  --texture-opacity-medium: 0.12;
  --texture-opacity-heavy: 0.18;
  --texture-opacity-dramatic: 0.25;

  /* Stack Effects */
  --paper-stack-offset-x: 4px;
  --paper-stack-offset-y: 4px;
  --paper-fan-angle: 8deg;

  /* Fold Corner */
  --fold-size: 25px;
  --fold-color: oklch(0.88 0.01 90);
  --fold-color-dark: oklch(0.82 0.01 90);
}

.dark {
  --background: oklch(0.25 0.04 55);              /* dark warm brown */
  --foreground: oklch(0.962 0.059 95.617);        /* amber-100 */
  --card: oklch(0.30 0.05 55);                    /* slightly lighter brown */
  --card-foreground: oklch(0.962 0.059 95.617);
  --popover: oklch(0.30 0.05 55);
  --popover-foreground: oklch(0.962 0.059 95.617);
  --primary: oklch(0.795 0.160 75.674);           /* amber-400 */
  --primary-foreground: oklch(0.25 0.04 55);      /* dark */
  --secondary: oklch(0.35 0.05 55);               /* warm dark */
  --secondary-foreground: oklch(0.905 0.093 95.136);
  --muted: oklch(0.35 0.05 55);
  --muted-foreground: oklch(0.666 0.088 57.249);
  --accent: oklch(0.769 0.188 70.08);             /* warm orange */
  --accent-foreground: oklch(0.25 0.04 55);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(0.473 0.137 46.201);            /* amber-800 */
  --input: oklch(0.473 0.137 46.201);             /* amber-800 */
  --ring: oklch(0.795 0.160 75.674);
  --chart-1: oklch(0.795 0.160 75.674);
  --chart-2: oklch(0.705 0.191 47.604);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.666 0.179 58.318);
  --sidebar: oklch(0.28 0.04 55);
  --sidebar-foreground: oklch(0.962 0.059 95.617);
  --sidebar-primary: oklch(0.795 0.160 75.674);
  --sidebar-primary-foreground: oklch(0.25 0.04 55);
  --sidebar-accent: oklch(0.35 0.05 55);
  --sidebar-accent-foreground: oklch(0.905 0.093 95.136);
  --sidebar-border: oklch(0.40 0.06 55);
  --sidebar-ring: oklch(0.795 0.160 75.674);

  /* Papercraft Dark Mode Adjustments */
  --paper-white: oklch(0.30 0.03 55);
  --paper-cream: oklch(0.28 0.03 55);
  --paper-kraft: oklch(0.35 0.05 55);
  --shadow-color: 40 5% 5%;
  --fold-color: oklch(0.35 0.03 55);
  --fold-color-dark: oklch(0.30 0.03 55);
  --paper-focus-ring-color: oklch(0.75 0.15 75);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* ========================================
   GLOBAL PAPER TEXTURE OVERLAY
   ======================================== */

/* Paper texture applied to the entire page */
.paper-texture-overlay {
  position: relative;
}

.paper-texture-overlay::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;
  opacity: var(--texture-opacity-subtle);
  mix-blend-mode: multiply;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='paperNoise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23paperNoise)'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 200px 200px;
}

/* Reduced motion - remove texture animation if any */
@media (prefers-reduced-motion: reduce) {
  .paper-texture-overlay::before {
    animation: none;
  }
}

/* Performance: don't apply texture in print */
@media print {
  .paper-texture-overlay::before {
    display: none;
  }
}

/* ========================================
   PAPERCRAFT UTILITY CLASSES
   ======================================== */

/* Base Interactive Paper Element */
.paper-interactive {
  transform-style: preserve-3d;
  perspective: 1000px;
  transform: var(--paper-state-default-transform);
  box-shadow: var(--paper-elevation-1);
  transition:
    transform var(--paper-transition-settle),
    box-shadow var(--paper-transition-settle);
  cursor: pointer;
  user-select: none;
}

.paper-interactive:hover {
  transform: var(--paper-state-hover-transform);
  box-shadow: var(--paper-elevation-2);
}

.paper-interactive:active {
  transform: var(--paper-state-active-transform);
  box-shadow: var(--paper-elevation-0);
  transition:
    transform var(--paper-transition-press),
    box-shadow var(--paper-transition-press);
}

.paper-interactive:focus-visible {
  outline: var(--paper-focus-ring-width) solid var(--paper-focus-ring-color);
  outline-offset: var(--paper-focus-ring-offset);
}

.paper-interactive:disabled,
.paper-interactive[disabled] {
  opacity: var(--paper-state-disabled-opacity);
  filter: var(--paper-state-disabled-filter);
  cursor: not-allowed;
  pointer-events: none;
}

/* Edge Filter Classes */
.edge-deckled { filter: url(#edge-deckled); }
.edge-handmade { filter: url(#edge-handmade); }
.edge-torn { filter: url(#edge-torn); }
.edge-torn-dramatic { filter: url(#edge-torn-dramatic); }

/* Paper Stack Effect */
.paper-stack {
  position: relative;
}

.paper-stack::before,
.paper-stack::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--card);
  border-radius: inherit;
  z-index: -1;
  box-shadow: var(--paper-elevation-0);
}

.paper-stack::before {
  transform: translate(var(--paper-stack-offset-x), var(--paper-stack-offset-y));
}

.paper-stack::after {
  transform: translate(
    calc(var(--paper-stack-offset-x) * 2),
    calc(var(--paper-stack-offset-y) * 2)
  );
  z-index: -2;
}

/* Messy Stack Variant */
.paper-stack-messy::before {
  transform: translate(3px, 5px) rotate(-2deg);
}

.paper-stack-messy::after {
  transform: translate(6px, 9px) rotate(3deg);
}

/* Folded Corner Effect */
.paper-folded-corner {
  position: relative;
  background: var(--card);
}

.paper-folded-corner::before {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 0;
  height: 0;
  border-style: solid;
  border-width: 0 var(--fold-size) var(--fold-size) 0;
  border-color: transparent var(--background) transparent transparent;
}

.paper-folded-corner::after {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 0;
  height: 0;
  border-style: solid;
  border-width: 0 var(--fold-size) var(--fold-size) 0;
  border-color: transparent var(--fold-color) transparent transparent;
  filter: drop-shadow(-1px 1px 1px hsl(var(--shadow-color) / 0.1));
}

/* Curled Corner Effect */
.paper-curled-corner {
  position: relative;
  overflow: hidden;
}

.paper-curled-corner::after {
  content: '';
  position: absolute;
  bottom: 0;
  right: 0;
  width: 20px;
  height: 20px;
  background: linear-gradient(
    315deg,
    transparent 40%,
    var(--fold-color) 41%,
    var(--fold-color) 48%,
    var(--card) 49%
  );
  border-radius: 0 0 0 80%;
  box-shadow: -2px -2px 5px hsl(var(--shadow-color) / 0.1);
  transition: all 400ms cubic-bezier(0.34, 1.56, 0.64, 1);
}

.paper-curled-corner:hover::after {
  width: 60px;
  height: 60px;
}

/* Sticky Note Style */
.paper-sticky {
  box-shadow: var(--paper-shadow-sticky);
  transform: perspective(1000px) rotateX(-1deg);
  transform-origin: top center;
  position: relative;
}

.paper-sticky::after {
  content: '';
  position: absolute;
  bottom: 0;
  right: 0;
  width: 50%;
  height: 20px;
  background: transparent;
  box-shadow: 0 8px 8px hsl(var(--shadow-color) / 0.15);
  transform: rotate(2deg) translateY(5px);
  transform-origin: bottom right;
  z-index: -1;
}

/* Draggable States */
.paper-draggable {
  cursor: grab;
  touch-action: none;
}

.paper-draggable.is-dragging {
  transform: scale(1.05) rotate(-3deg);
  box-shadow: 0 16px 24px hsl(var(--shadow-color) / 0.2);
  opacity: 0.9;
  cursor: grabbing;
  z-index: 9999;
}

/* ========================================
   ACCESSIBILITY & PERFORMANCE
   ======================================== */

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  .paper-interactive,
  .paper-curled-corner::after,
  .paper-draggable {
    transition: none;
  }

  .paper-interactive:hover {
    transform: none;
  }

  .paper-curled-corner:hover::after {
    width: 20px;
    height: 20px;
  }
}

/* High Contrast Mode */
@media (prefers-contrast: more) {
  .paper-interactive:focus-visible {
    outline: 4px double currentColor;
    outline-offset: 4px;
  }
}

/* Forced Colors (Windows High Contrast) */
@media (forced-colors: active) {
  .paper-interactive:focus-visible {
    outline: 3px solid CanvasText;
  }

  .paper-stack::before,
  .paper-stack::after {
    border: 1px solid CanvasText;
  }
}

/* Performance optimization for textured elements */
.paper-textured {
  contain: paint;
}

/* ========================================
   NOTEBOOK PAPER STYLES
   High-end realistic ruled paper effect
   ======================================== */

/* CSS variables for notebook grid alignment */
:root {
  --notebook-line-height: 32px;
  --notebook-margin-left: 3.5rem;
  --notebook-paper-color: #FEFDFB;
  --notebook-line-color: oklch(0.82 0.015 240 / 0.35);
  --notebook-margin-color: oklch(0.68 0.16 20 / 0.45);
}

/* Notebook paper background with lines + subtle texture */
.notebook-paper {
  position: relative;
  background-color: var(--notebook-paper-color);
  /* Ruled lines - precisely spaced for text alignment */
  background-image:
    repeating-linear-gradient(
      to bottom,
      transparent,
      transparent calc(var(--notebook-line-height) - 1px),
      var(--notebook-line-color) calc(var(--notebook-line-height) - 1px),
      var(--notebook-line-color) var(--notebook-line-height)
    );
  background-position: 0 0;
  border-radius: var(--radius);
  box-shadow:
    var(--paper-elevation-2),
    inset 0 0 0 1px oklch(0.85 0.02 80 / 0.3);
  overflow: hidden;
}

/* Subtle paper texture overlay */
.notebook-paper::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0.4;
  mix-blend-mode: multiply;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-size: 150px 150px;
  z-index: 0;
}

/* Red margin line with realistic ink bleed */
.notebook-paper::before {
  content: '';
  position: absolute;
  left: var(--notebook-margin-left);
  top: 0;
  bottom: 0;
  width: 1.5px;
  background: linear-gradient(
    to bottom,
    var(--notebook-margin-color) 0%,
    oklch(0.62 0.18 18 / 0.5) 25%,
    var(--notebook-margin-color) 50%,
    oklch(0.65 0.15 22 / 0.4) 75%,
    var(--notebook-margin-color) 100%
  );
  /* Subtle ink bleed effect */
  box-shadow:
    0.5px 0 0 oklch(0.7 0.12 20 / 0.15),
    -0.5px 0 0 oklch(0.7 0.12 20 / 0.1);
  z-index: 2;
}

/* Hole punches container */
.notebook-paper-holes {
  position: relative;
  /* Add left padding to account for hole punch area */
  padding-left: 1rem;
}

/* Realistic hole punches with depth */
.notebook-paper-holes .notebook-holes-overlay {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 2rem;
  pointer-events: none;
  z-index: 3;
}

/* Individual hole punch styling via pseudo-elements */
.notebook-paper-holes::before {
  content: '';
  position: absolute;
  left: 0.65rem;
  top: 2.5rem;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  /* Hole punch with realistic depth */
  background:
    radial-gradient(
      circle at 40% 35%,
      var(--background) 0%,
      oklch(0.92 0.01 80) 100%
    );
  box-shadow:
    /* Inner shadow for depth */
    inset 1px 2px 3px oklch(0.5 0.02 80 / 0.25),
    inset -1px -1px 2px oklch(1 0 0 / 0.5),
    /* Outer ring - slightly darker edge */
    0 0 0 0.5px oklch(0.8 0.02 80 / 0.4),
    /* Subtle drop shadow */
    0 1px 2px oklch(0.5 0.02 80 / 0.1);
  z-index: 3;
}

/* Multiple hole punches using box-shadow */
.notebook-paper-holes::after {
  content: '';
  position: absolute;
  left: 0.65rem;
  top: 50%;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  transform: translateY(-50%);
  background:
    radial-gradient(
      circle at 40% 35%,
      var(--background) 0%,
      oklch(0.92 0.01 80) 100%
    );
  box-shadow:
    /* This hole's inner shadow */
    inset 1px 2px 3px oklch(0.5 0.02 80 / 0.25),
    inset -1px -1px 2px oklch(1 0 0 / 0.5),
    0 0 0 0.5px oklch(0.8 0.02 80 / 0.4),
    0 1px 2px oklch(0.5 0.02 80 / 0.1),
    /* Top hole */
    0 calc(-50% + 2.5rem + 7px) 0 0 var(--background),
    /* Bottom hole */
    0 calc(50% - 2.5rem - 7px) 0 0 var(--background);
  z-index: 3;
}

/* Bottom hole punch */
.notebook-paper-holes > .notebook-hole-bottom {
  position: absolute;
  left: 0.65rem;
  bottom: 2.5rem;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background:
    radial-gradient(
      circle at 40% 35%,
      var(--background) 0%,
      oklch(0.92 0.01 80) 100%
    );
  box-shadow:
    inset 1px 2px 3px oklch(0.5 0.02 80 / 0.25),
    inset -1px -1px 2px oklch(1 0 0 / 0.5),
    0 0 0 0.5px oklch(0.8 0.02 80 / 0.4),
    0 1px 2px oklch(0.5 0.02 80 / 0.1);
  z-index: 3;
  pointer-events: none;
}

/* Notebook accordion item styling - ALIGNED TO LINES */
.notebook-accordion-item {
  border-bottom: none !important;
  padding-left: calc(var(--notebook-margin-left) + 0.75rem);
  position: relative;
  z-index: 1;
  /* Each item occupies exactly one line height */
  min-height: var(--notebook-line-height);
}

/* Accordion trigger - text baseline sits ON the ruled line */
.notebook-accordion-item [data-radix-collection-item] {
  height: var(--notebook-line-height);
  padding-top: 0;
  padding-bottom: 0;
  display: flex;
  /* Align baseline to bottom of container (where the line is) */
  align-items: flex-end;
  padding-bottom: 6px; /* Fine-tune: push text up so baseline lands on line */
}

/* Bullet point - aligned to text baseline on the line */
.notebook-accordion-item::before {
  content: '';
  position: absolute;
  left: calc(var(--notebook-margin-left) + 0.25rem);
  /* Position at the ruled line */
  top: calc(var(--notebook-line-height) - 8px);
  width: 5px;
  height: 5px;
  border-radius: 50%;
  background-color: oklch(0.55 0.12 55);
}

/* Accordion content baseline alignment */
.notebook-accordion-item [data-state="open"] + [data-radix-accordion-content] {
  padding-left: 0.5rem;
}

/* Notebook trigger - question text */
.notebook-trigger {
  font-weight: 600;
  font-size: 0.95rem;
  color: oklch(0.30 0.06 55);
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  padding-right: 1rem;
  /* Line height for multi-line questions */
  line-height: var(--notebook-line-height);
}

.notebook-trigger:hover {
  color: oklch(0.25 0.08 55);
}

/* Notebook content - answer text with baseline on lines */
.notebook-content {
  color: oklch(0.38 0.03 55);
  font-size: 0.9rem;
  /* Each line of text sits on a ruled line */
  line-height: var(--notebook-line-height);
  padding-left: calc(var(--notebook-margin-left) + 1.25rem);
  padding-right: 1.5rem;
  /* Offset so first line baseline sits on the next ruled line */
  padding-top: calc(var(--notebook-line-height) - 10px);
  padding-bottom: 6px;
}

.notebook-content > div {
  /* Inner content wrapper - maintain grid alignment */
  padding-top: 0;
  padding-bottom: 0;
}

/* Refine accordion item spacing */
.notebook-accordion-item {
  /* Each FAQ item aligns to the grid */
  margin-bottom: 0;
}

.notebook-accordion-item:not(:last-child) {
  /* Spacing between items - one blank line */
  padding-bottom: var(--notebook-line-height);
}

/* Chevron icon styling */
.notebook-accordion-item [data-radix-collection-item] svg {
  color: oklch(0.55 0.06 55);
  transition: transform 0.2s ease, color 0.2s ease;
}

.notebook-accordion-item [data-radix-collection-item]:hover svg {
  color: oklch(0.45 0.08 55);
}

/* Remove conflicting pseudo-element holes since we use React component */
.notebook-paper-holes::before,
.notebook-paper-holes::after {
  display: none;
}

/* Paper edge refinement */
.notebook-paper {
  /* Subtle top highlight like real paper catching light */
  border-top: 1px solid oklch(1 0 0 / 0.4);
}

/* Dark mode adjustments */
.dark .notebook-paper {
  --notebook-paper-color: oklch(0.22 0.015 60);
  --notebook-line-color: oklch(0.35 0.015 240 / 0.4);
  --notebook-margin-color: oklch(0.45 0.14 20 / 0.5);
  border-top-color: oklch(0.35 0.015 60 / 0.3);
}

.dark .notebook-paper::after {
  opacity: 0.15;
  mix-blend-mode: overlay;
}

.dark .notebook-trigger {
  color: oklch(0.85 0.04 55);
}

.dark .notebook-trigger:hover {
  color: oklch(0.92 0.05 55);
}

.dark .notebook-content {
  color: oklch(0.75 0.02 55);
}

/* ========================================
   MARQUEE ANIMATIONS (Magic UI)
   ======================================== */

@keyframes marquee {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(calc(-100% - var(--gap)));
  }
}

@keyframes marquee-vertical {
  from {
    transform: translateY(0);
  }
  to {
    transform: translateY(calc(-100% - var(--gap)));
  }
}

.animate-marquee {
  animation: marquee var(--duration) infinite linear;
}

.animate-marquee-vertical {
  animation: marquee-vertical var(--duration) linear infinite;
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .animate-marquee,
  .animate-marquee-vertical {
    animation: none;
  }
}

/* ========================================
   SHINE BORDER ANIMATION (Magic UI)
   ======================================== */

@keyframes shine {
  0% {
    background-position: 0% 0%;
  }
  50% {
    background-position: 100% 100%;
  }
  100% {
    background-position: 0% 0%;
  }
}

.animate-shine {
  animation: shine var(--duration, 14s) infinite linear;
}

@media (prefers-reduced-motion: reduce) {
  .animate-shine {
    animation: none;
  }
}
